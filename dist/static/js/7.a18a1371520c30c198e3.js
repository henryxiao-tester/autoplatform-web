webpackJsonp([7],{"9Lcr":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});a("gUTm");var s=a("X2Oc"),i=a("FaxB"),n={data:function(){return{dataList:[],input:"",inputTaskId:"",caseSuites:[],addTaskName:"",len:0,caseSuiteData:[],Visible:!1,currentPage:1,dialogTableVisible:!1,dialogFormVisible:!1,taskVisible:!1,caseListPage:1,form:{taskName:"",taskId:"",casesID:""},formLabelWidth:"120px",delCallBack:!1,caseSuiteName:""}},methods:{changeSwitch:function(t){this.caseSuites.push(t.id),console.log(this.caseSuites)},addTask:function(){this.taskVisible=!0},sureAddTask:function(){var t=this;if(Object(s.b)(this.addTaskName))return this.openWarning("任务名称不能为空","error"),null;this.$axios.post(i.b.domain+i.a.addTaskData,{taskName:this.addTaskName}).then(function(e){200===e.data.code?(t.taskVisible=!1,t.openWarning(e.data.message,"success")):t.openWarning(e.data.message,"error")})},selectCaseSuite:function(){var t=this;Object(s.b)(this.caseSuiteName)?this.$axios.post(i.b.domain+i.a.getCaseInfo,{pageSize:1}).then(function(e){t.caseSuiteData=e.data.data}):this.$axios.post(i.b.domain+i.a.getCaseInfo,{caseSuiteName:this.caseSuiteName}).then(function(e){console.log(t.caseSuiteData)})},handleCurrentChange:function(t){this.currentPage=t},getList:function(){var t=this;this.$axios.post(i.b.domain+i.a.getTaskList,{pageSize:1}).then(function(e){t.dataList=e.data.data})},bindingCaseSuite:function(){var t=this;if(Object(s.b)(this.inputTaskId))return this.openWarning("任务ID不能为空","error"),null;this.$axios.post(i.b.domain+i.a.bindingCaseSuite,{taskId:this.inputTaskId,caseSuiteId:this.caseSuites}).then(function(e){200===e.data.code?(t.Visible=!1,t.openWarning(e.data.message,"success")):t.openWarning(e.data.message,"error")})},getCaseInfo:function(){var t=this;this.$axios.post(i.b.domain+i.a.getCaseInfo,{pageSize:1}).then(function(e){200===e.data.code?(t.Visible=!0,t.caseSuiteData=e.data.data,t.len=t.caseSuiteData.length,console.log(e.data.data)):t.openWarning(e.data.message,"error")})},selectData:function(){var t=this;Object(s.b)(this.input)?this.$axios.post(i.b.domain+i.a.getTaskList,{pageSize:1}).then(function(e){t.dataList=e.data.data}):this.$axios.post(i.b.domain+i.a.getTaskDataByName,{pageSize:1,taskName:this.input}).then(function(e){t.dataList=e.data.data})},handleUpdate:function(t){this.dialogFormVisible=!0,this.form.taskName=t.taskName,this.form.taskId=t.taskId,this.form.casesID=t.casesID},sureModify:function(){var t=this;this.$axios.post(i.b.domain+i.a.updateTaskDataByName,{taskName:this.form.taskName,taskId:this.form.taskId,casesID:this.form.casesID}).then(function(e){console.log(e),200===e.data.code?(t.dialogFormVisible=!1,t.openWarning(e.data.message,"success")):t.openWarning(e.data.message,"error")})},handleDelete:function(t){var e=this;this.$confirm("此操作将删除此任务, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(a){"confirm"===a&&(e.$axios.post(i.b.domain+i.a.deleteTaskData,{taskId:t.taskId}).then(function(t){200===t.data.code?e.$message({type:"success",message:"删除成功!"}):e.$message({type:"info",message:"请求异常"})}),e.$axios.post(i.b.domain+i.a.getTaskList,{pageSize:1}).then(function(t){e.dataList=t.data.data}))}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},handleExcute:function(t){var e=this;this.$confirm("是否执行该条任务?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(a){"confirm"===a&&e.$axios.post(i.b.domain+i.a.excuteTask,{taskId:t.taskId}).then(function(t){200===t.data.code?e.$message({type:"success",message:"执行成功!"}):e.$message({type:"info",message:"请求异常"})})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},handleCaseListPageChange:function(t){this.caseListPage=t},openWarning:function(t,e){this.$message({message:t,type:e})}},created:function(){this.getList()},computed:{showTaskList:function(){return this.dataList.slice(20*(this.caseListPage-1),20*this.caseListPage)},showCaseSuiteTable:function(){return console.log(this.currentPage),console.log(this.caseSuiteData.slice(10*(this.currentPage-1),10*this.currentPage)),this.caseSuiteData.slice(10*(this.currentPage-1),10*this.currentPage)}}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"dashboard-container"},[a("div",{staticClass:"app-container"},[a("el-card",{attrs:{shadow:"never"}},[a("el-input",{staticStyle:{width:"200px","margin-bottom":"20px"},attrs:{placeholder:"请输任务名称",clearable:""},model:{value:t.input,callback:function(e){t.input=e},expression:"input"}}),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.selectData}},[t._v("查询")]),t._v(" "),a("el-button",{staticStyle:{float:"right","margin-right":"20px"},attrs:{type:"primary"},on:{click:t.addTask}},[t._v("添加任务")]),t._v(" "),a("el-button",{staticStyle:{float:"right","margin-right":"20px"},attrs:{type:"primary"},on:{click:t.getCaseInfo}},[t._v("绑定用例集")]),t._v(" "),a("el-dialog",{attrs:{title:"当前任务绑定用例集",visible:t.Visible},on:{"update:visible":function(e){t.Visible=e}}},[a("el-input",{staticStyle:{width:"200px","margin-bottom":"20px"},attrs:{placeholder:"请输用例集名称",clearable:""},model:{value:t.caseSuiteName,callback:function(e){t.caseSuiteName=e},expression:"caseSuiteName"}}),t._v(" "),a("el-input",{staticStyle:{width:"200px","margin-bottom":"20px",float:"right"},attrs:{placeholder:"请输用任务ID(必填)",clearable:""},model:{value:t.inputTaskId,callback:function(e){t.inputTaskId=e},expression:"inputTaskId"}}),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.selectCaseSuite}},[t._v("查询")]),t._v(" "),a("el-table",{attrs:{data:t.showCaseSuiteTable}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"50px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(10*(t.currentPage-1)+e.$index+1))])]}}])}),t._v(" "),a("el-table-column",{attrs:{property:"id",label:"用例集ID"}}),t._v(" "),a("el-table-column",{attrs:{property:"caseName",label:"用例集名称"}}),t._v(" "),a("el-table-column",{attrs:{property:"status",label:"状态",width:"100px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-switch",{attrs:{"inactive-value":0,"active-value":1,"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:function(a){return t.changeSwitch(e.row)}},model:{value:e.row.status,callback:function(a){t.$set(e.row,"status",a)},expression:"scope.row.status"}})]}}])})],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.Visible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.bindingCaseSuite}},[t._v("确 定")])],1),t._v(" "),a("el-pagination",{attrs:{layout:"prev, pager, next",total:this.len,"page-size":10},on:{"current-change":t.handleCurrentChange}})],1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.showTaskList,border:""}},[a("el-table-column",{attrs:{fixed:"",type:"index",label:"序号",width:"50"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(20*(t.caseListPage-1)+e.$index+1))])]}}])}),t._v(" "),a("el-table-column",{attrs:{fixed:"",prop:"taskId",label:"任务ID"}}),t._v(" "),a("el-table-column",{attrs:{fixed:"",prop:"taskName",label:"任务名称"}}),t._v(" "),a("el-table-column",{attrs:{fixed:"",prop:"casesID",label:"关联用例集","show-overflow-tooltip":!0}}),t._v(" "),a("el-table-column",{attrs:{fixed:"",prop:"createTime",label:"创建时间"}}),t._v(" "),a("el-table-column",{attrs:{fixed:"",prop:"updateTime",label:"修改时间"}}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.handleUpdate(e.row)}}},[t._v("修改")]),t._v(" "),a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.handleDelete(e.row)}}},[t._v("删除")]),t._v(" "),a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.handleExcute(e.row)}}},[t._v("执行")])]}}])})],1),t._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{plain:!0},on:{click:t.openWarning}}),t._v(" "),a("el-pagination",{staticStyle:{float:"right",margin:"20px"},attrs:{background:"",layout:"prev, pager, next",total:this.dataList.length,"page-size":20},on:{"current-change":t.handleCaseListPageChange}})],1),t._v(" "),a("el-dialog",{attrs:{title:"修改当前任务",visible:t.dialogFormVisible,width:"600px"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{attrs:{model:t.form}},[a("el-form-item",{attrs:{label:"任务ID","label-width":t.formLabelWidth}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:t.form.taskId,callback:function(e){t.$set(t.form,"taskId",e)},expression:"form.taskId"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"任务名称","label-width":t.formLabelWidth}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:t.form.taskName,callback:function(e){t.$set(t.form,"taskName",e)},expression:"form.taskName"}})],1),t._v(" "),a("div",{staticClass:"box"},[a("div",{staticClass:"top"},[a("div",{staticClass:"bottom"},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"填写用例集ID,多个逗号添加",placement:"bottom"}},[a("el-form-item",{attrs:{label:"关联用例集","label-width":t.formLabelWidth}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:t.form.casesID,callback:function(e){t.$set(t.form,"casesID",e)},expression:"form.casesID"}})],1)],1)],1)])])],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.sureModify}},[t._v("确 定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"添加任务",visible:t.taskVisible,width:"600px"},on:{"update:visible":function(e){t.taskVisible=e}}},[a("el-form",[a("el-form-item",{attrs:{label:"任务名称","label-width":t.formLabelWidth}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:t.addTaskName,callback:function(e){t.addTaskName=e},expression:"addTaskName"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.taskVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.sureAddTask}},[t._v("确 定")])],1)],1)],1)])},staticRenderFns:[]};var l=a("C7Lr")(n,o,!1,function(t){a("B9O4")},"data-v-820b5d7e",null);e.default=l.exports},B9O4:function(t,e){}});
//# sourceMappingURL=7.a18a1371520c30c198e3.js.map